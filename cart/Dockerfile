FROM node:18-alpine

ARG STRIPE_SECRET_KEY
ARG FRONTEND_URL
ENV STRIPE_SECRET_KEY=$STRIPE_SECRET_KEY
ENV FRONTEND_URL=$FRONTEND_URL
ENV MONGODB_URI=$MONGODB_URI

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 4003

CMD ["npm", "start"]